/*!
 * @preserve
 * jquery.scrolldepth.js | v0.9.1
 * Copyright (c) 2015 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,n,t,r){e=n.jQuery;var o,i,l,a,c={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1,container:r},u=e(n),p=[],s=!1,h=0;e.scrollDepth=function(r){function g(){var e=n.innerHeight?n.innerHeight:u.height();return u.scrollTop()+e}function f(e,t,c,u){a?(a({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:r.nonInteraction}),r.pixelDepth&&arguments.length>2&&c>h&&(h=c,a({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:y(c),eventValue:1,eventNonInteraction:r.nonInteraction})),r.userTiming&&arguments.length>3&&a({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:u})):(o&&(n[l]("send","event","Scroll Depth",e,t,1,{nonInteraction:r.nonInteraction}),r.pixelDepth&&arguments.length>2&&c>h&&(h=c,n[l]("send","event","Scroll Depth","Pixel Depth",y(c),1,{nonInteraction:r.nonInteraction})),r.userTiming&&arguments.length>3&&n[l]("send","timing","Scroll Depth",e,u,t)),i&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,r.nonInteraction]),r.pixelDepth&&arguments.length>2&&c>h&&(h=c,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",y(c),1,r.nonInteraction])),r.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,u,t,100])))}function v(e,n){var t=e+n;return{"0%":parseInt(0*t,10),"25%":parseInt(.25*t,10),"50%":parseInt(.5*t,10),"75%":parseInt(.75*t,10),"100%":t-5}}function m(n,t,r){e.each(n,function(n,o){-1===e.inArray(n,p)&&t>=o&&(f("Percentage",n,t,r),p.push(n))})}function D(n,t,r){e.each(n,function(n,o){-1===e.inArray(o,p)&&e(o).length&&t>=e(o).offset().top&&(f("Elements",o,t,r),p.push(o))})}function y(e){return(250*Math.floor(e/250)).toString()}function d(){A()}function I(e,n){var t,r,o,i=null,l=0,a=function(){l=new Date,i=null,o=e.apply(t,r)};return function(){var c=new Date;l||(l=c);var u=n-(c-l);return t=this,r=arguments,0>=u?(clearTimeout(i),i=null,l=c,o=e.apply(t,r)):i||(i=setTimeout(a,u)),o}}function S(){return e(r.container?r.container:t.body)}function T(){return S().height()}function _(){var e=S();return e.position()?e.position().top:0}function A(){s=!0,u.on("scroll.scrollDepth",I(function(){var e=(S(),g()),n=v(T(),_()),t=+new Date-b;return p.length>=r.elements.length+(r.percentage?4:0)?(u.off("scroll.scrollDepth"),void(s=!1)):(r.elements&&D(r.elements,e,t),void(r.percentage&&m(n,e,t)))},500))}var b=+new Date;r=e.extend({},c,r),e(t).height()<r.minHeight||(r.gaGlobal?(o=!0,l=r.gaGlobal):"function"==typeof ga?(o=!0,l="ga"):"function"==typeof __gaTracker&&(o=!0,l="__gaTracker"),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(i=!0),"function"==typeof r.eventHandler?a=r.eventHandler:"undefined"==typeof dataLayer||"function"!=typeof dataLayer.push||r.gtmOverride||(a=function(e){dataLayer.push(e)}),e.scrollDepth.reset=function(){p=[],h=0,u.off("scroll.scrollDepth"),A()},e.scrollDepth.addElements=function(n){"undefined"!=typeof n&&e.isArray(n)&&(e.merge(r.elements,n),s||A())},e.scrollDepth.removeElements=function(n){"undefined"!=typeof n&&e.isArray(n)&&e.each(n,function(n,t){var o=e.inArray(t,r.elements),i=e.inArray(t,p);-1!=o&&r.elements.splice(o,1),-1!=i&&p.splice(i,1)})},e.scrollDepth.calculateScrollPercentageFromMarks=function(){var e,n,t,r,o,i=v(T(),_()),l=Object.keys(i),a=g(),e=[];for(n=0,t=l.length;t>n;n++)o=l[n],r=i[o],a>=r&&e.push(o);return e[e.length-1]},d())}}(jQuery,window,document);